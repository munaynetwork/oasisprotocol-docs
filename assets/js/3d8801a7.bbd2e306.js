"use strict";(self.webpackChunkdocs_oasis_dev=self.webpackChunkdocs_oasis_dev||[]).push([[5609],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=o.createContext({}),l=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=l(e.components);return o.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,p=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=l(n),m=r,v=d["".concat(p,".").concat(m)]||d[m]||u[m]||a;return n?o.createElement(v,s(s({ref:t},c),{},{components:n})):o.createElement(v,s({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,s=new Array(a);s[0]=d;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var l=2;l<a;l++)s[l]=n[l];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},84:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return p},default:function(){return m},frontMatter:function(){return i},metadata:function(){return l},toc:function(){return u}});var o=n(7462),r=n(3366),a=(n(7294),n(3905)),s=["components"],i={},p="Governance",l={unversionedId:"consensus/services/governance",id:"consensus/services/governance",title:"Governance",description:"The governance service is responsible for providing an on-chain governance",source:"@site/external/oasis-core/docs/consensus/services/governance.md",sourceDirName:"consensus/services",slug:"/consensus/services/governance",permalink:"/oasis-core/consensus/services/governance",draft:!1,tags:[],version:"current",lastUpdatedAt:1655201825,formattedLastUpdatedAt:"6/14/2022",frontMatter:{},sidebar:"oasisCore",previous:{title:"Committee Scheduler",permalink:"/oasis-core/consensus/services/scheduler"},next:{title:"Root Hash",permalink:"/oasis-core/consensus/services/roothash"}},c={},u=[{value:"Methods",id:"methods",level:2},{value:"Submit Proposal",id:"submit-proposal",level:3},{value:"Vote",id:"vote",level:3},{value:"Events",id:"events",level:2},{value:"Proposal Submitted Event",id:"proposal-submitted-event",level:3},{value:"Proposal Finalized Event",id:"proposal-finalized-event",level:3},{value:"Proposal Executed Event",id:"proposal-executed-event",level:3},{value:"Vote Event",id:"vote-event",level:3},{value:"Consensus Parameters",id:"consensus-parameters",level:2},{value:"Test Vectors",id:"test-vectors",level:2}],d={toc:u};function m(e){var t=e.components,n=(0,r.Z)(e,s);return(0,a.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"governance"},"Governance"),(0,a.kt)("p",null,"The governance service is responsible for providing an on-chain governance\nmechanism."),(0,a.kt)("p",null,"The service interface definition lives in ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/oasisprotocol/oasis-core/tree/master/go/governance/api"},(0,a.kt)("inlineCode",{parentName:"a"},"go/governance/api")),". It defines the\nsupported queries and transactions. For more information you can also check out\nthe ",(0,a.kt)("a",{parentName:"p",href:"https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/governance/api?tab=doc"},"consensus service API documentation")," and the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/oasisprotocol/adrs/blob/main/0006-consensus-governance.md"},"governance ADR\nspecification"),"."),(0,a.kt)("h2",{id:"methods"},"Methods"),(0,a.kt)("p",null,"The following sections describe the methods supported by the consensus\ngovernance service."),(0,a.kt)("h3",{id:"submit-proposal"},"Submit Proposal"),(0,a.kt)("p",null,"Proposal submission enables a new consensus layer governance proposal to be\ncreated."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Method name:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"governance.SubmitProposal\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Body:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-golang"},'// ProposalContent is a consensus layer governance proposal content.\ntype ProposalContent struct {\n    Upgrade       *UpgradeProposal       `json:"upgrade,omitempty"`\n    CancelUpgrade *CancelUpgradeProposal `json:"cancel_upgrade,omitempty"`\n}\n\n// UpgradeProposal is an upgrade proposal.\ntype UpgradeProposal struct {\n    upgrade.Descriptor\n}\n\n// CancelUpgradeProposal is an upgrade cancellation proposal.\ntype CancelUpgradeProposal struct {\n    // ProposalID is the identifier of the pending upgrade proposal.\n    ProposalID uint64 `json:"proposal_id"`\n}\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Fields:")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"upgrade")," (optional) specifies an upgrade proposal."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"cancel_upgrade")," (optional) specifies an upgrade cancellation proposal.")),(0,a.kt)("p",null,"Exactly one of the proposal kind fields needs to be non-nil, otherwise the\nproposal is considered malformed."),(0,a.kt)("h3",{id:"vote"},"Vote"),(0,a.kt)("p",null,"Voting for submitted consensus layer governance proposals."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Method name:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"governance.CastVote\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Body:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-golang"},'type ProposalVote struct {\n    // ID is the unique identifier of a proposal.\n    ID uint64 `json:"id"`\n    // Vote is the vote.\n    Vote Vote `json:"vote"`\n}\n')),(0,a.kt)("h2",{id:"events"},"Events"),(0,a.kt)("h3",{id:"proposal-submitted-event"},"Proposal Submitted Event"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Body:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-golang"},'type ProposalSubmittedEvent {\n    // ID is the unique identifier of a proposal.\n    ID uint64 `json:"id"`\n    // Submitter is the staking account address of the submitter.\n    Submitter staking.Address `json:"submitter"`\n}\n')),(0,a.kt)("p",null,"Emitted for every submitted proposal."),(0,a.kt)("h3",{id:"proposal-finalized-event"},"Proposal Finalized Event"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Body:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-golang"},'type ProposalFinalizedEvent struct {\n    // ID is the unique identifier of a proposal.\n    ID uint64 `json:"id"`\n    // State is the new proposal state.\n   State ProposalState `json:"state"`\n}\n')),(0,a.kt)("p",null,"Emitted when a proposal is finalized."),(0,a.kt)("h3",{id:"proposal-executed-event"},"Proposal Executed Event"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Body:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-golang"},'type ProposalExecutedEvent {\n    // ID is the unique identifier of a proposal.\n    ID uint64 `json:"id"`\n}\n')),(0,a.kt)("p",null,"Emitted when a passed proposal is executed."),(0,a.kt)("h3",{id:"vote-event"},"Vote Event"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Body:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-golang"},'type VoteEvent {\n    // ID is the unique identifier of a proposal.\n    ID uint64 `json:"id"`\n    // Submitter is the staking account address of the vote submitter.\n    Submitter staking.Address `json:"submitter"`\n    // Vote is the cast vote.\n    Vote Vote `json:"vote"`\n}\n')),(0,a.kt)("p",null,"Emitted when a vote is cast."),(0,a.kt)("h2",{id:"consensus-parameters"},"Consensus Parameters"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"gas_costs")," (transaction.Costs) are the governance transaction gas costs.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"min_proposal_deposit")," (base units) specifies the number of base units that\nare deposited when creating a new proposal.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"voting_period")," (epochs) specifies the number of epochs after which the voting\nfor a proposal is closed and the votes are tallied.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"quorum")," (uint8: ","[","0,100","]",") specifies the minimum percentage of voting power\nthat needs to be cast on a proposal for the result to be valid.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"threshold")," (uint8: ","[","0,100","]",") specifies the minimum percentage of ",(0,a.kt)("inlineCode",{parentName:"p"},"VoteYes"),"\nvotes in order for a proposal to be accepted.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"upgrade_min_epoch_diff")," (epochs) specifies the minimum number of epochs\nbetween the current epoch and the proposed upgrade epoch for the upgrade\nproposal to be valid. Additionally specifies the minimum number of epochs\nbetween two consecutive pending upgrades.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"upgrade_cancel_min_epoch_diff")," (epochs) specifies the minimum number of\nepochs between the current epoch and the proposed upgrade epoch for the\nupgrade cancellation proposal to be valid."))),(0,a.kt)("h2",{id:"test-vectors"},"Test Vectors"),(0,a.kt)("p",null,"To generate test vectors for various governance ",(0,a.kt)("a",{parentName:"p",href:"/oasis-core/consensus/transactions"},"transactions"),", run:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"make -C go governance/gen_vectors\n")),(0,a.kt)("p",null,"For more information about the structure of the test vectors see the section\non ",(0,a.kt)("a",{parentName:"p",href:"/oasis-core/consensus/test-vectors"},"Transaction Test Vectors"),"."))}m.isMDXComponent=!0}}]);